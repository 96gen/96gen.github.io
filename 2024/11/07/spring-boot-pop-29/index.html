<!DOCTYPE html><html lang="en-us" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Spring Boot project-oriented programming（29）Vue.js 打造 RESTful API前端：持久化保存、顯示和篩選商品 | 96gen's blog</title><link rel="icon" type="image/x-icon" href="/favicon.ico"><link rel="preload" as="font" crossorigin="anonymous" href="/font/Bender.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/font/BenderLight.ttf"><link rel="preload" as="font" crossorigin="anonymous" href="/font/JetBrainsMono-Regular.woff2"><link rel="stylesheet" href="/css/arknights.css"><style>@font-face {
  font-family: Bender;
  src: local('Bender'), url("/font/Bender.ttf"), url("/font/Bender.otf");
}
@font-face {
  font-family: BenderLight;
  src: local('BenderLight'), url("/font/BenderLight.ttf");
}
@font-face {
  font-family: 'JetBrains Mono';
  src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}
</style><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"Enter here","blurHolder":"Search","noResult":"Data \"$0\" not found"},"code":{"codeInfo":"$0 - $1 lines","copy":"copy"}}</script><link type="text/css" rel="stylesheet" href="/lib/encrypt/hbe.style.css"><script src="//unpkg.com/mermaid@10.5.0/dist/mermaid.min.js"></script><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link type="text/css" rel="stylesheet" href="/lib/fontawesome/css/all.min.css"><script>if (window.localStorage.getItem('theme-mode') === 'light')
 document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark')
 document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.woff2") format('woff2');
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><style>:root {
 --dark-background: url('https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg');
 --light-background: url('/img/bk.jpg');
 --theme-encrypt-confirm: 'confirm'
}</style><script defer src="/js/arknights.js"></script><script defer src="/js/search.js"></script><script defer type="module">import mermaid from '//unpkg.com/mermaid@10.5.0/dist/mermaid.esm.mjs';
window.mermaid = mermaid;
code.paintMermaid();
</script><script async src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script async src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script async src="/lib/encrypt/hbe.js"></script><script async src="/js/pjax.js"></script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js','data-pjax','.busuanzi'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script><script class="pjax-js">reset= () => {document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="loading" style="opacity: 0;"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><nav><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Search" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup" tabindex="0"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>Spring Boot project-oriented programming（29）Vue.js 打造 RESTful API前端：持久化保存、顯示和篩選商品</h1></div><hr><div id="post-content"><h1 id="持久化保存"><a href="#持久化保存" class="headerlink" title="持久化保存"></a>持久化保存</h1><p>我們目前面臨一個大問題：登入後切換頁面會導致 token 消失，雖然使用 router.push 可以暫時解決，但按 F5 重新整理仍會讓 token 消失。</p>
<p>為了解決這個問題，我們需要將 token 持久化保存，這樣就能確保 token 持續有效。</p>
<hr>
<h2 id="步驟"><a href="#步驟" class="headerlink" title="步驟"></a>步驟</h2><ol>
<li>安裝 Pinia 持久化套件： 安裝 Pinia 的持久化套件，確保能夠長期保存 token。</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">bun install pinia-plugin-persistedstate<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>修改 main.js，啟用 Pinia 持久化： 在 main.js 中設定並啟用 Pinia 持久化功能。</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> piniaPluginPersistedstate <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;pinia-plugin-persistedstate&#x27;</span>;<br><br>pinia.<span class="hljs-title function_">use</span>(piniaPluginPersistedstate)<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>修改 auth.js，將 token 持久化： 在 auth.js 中設定 token 的持久化邏輯，確保每次登入後都能保存 token。</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> useAuthStore = <span class="hljs-title function_">defineStore</span>(<span class="hljs-string">&#x27;auth&#x27;</span>, &#123;<br>  <span class="hljs-attr">state</span>: <span class="hljs-function">() =&gt;</span> (&#123;<br>    <span class="hljs-comment">//...</span><br>  &#125;),<br>  <span class="hljs-attr">getters</span>: &#123;<br>    <span class="hljs-comment">//...</span><br>  &#125;,<br>  <span class="hljs-attr">actions</span>: &#123;<br>    <span class="hljs-comment">//...</span><br>  &#125;,<br>  <span class="hljs-attr">persist</span>: <span class="hljs-literal">true</span>,<span class="hljs-comment">//啟用pinia持久化</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<p>這樣一來，無論是重新整理還是切換頁面，token 都不會消失。</p>
<p>注意：token 過期後，由於持久化保存會殘留過期的 token，需要手動登出來清除 token。</p>
<h1 id="新增商品頁面"><a href="#新增商品頁面" class="headerlink" title="新增商品頁面"></a>新增商品頁面</h1><ol>
<li>建立 AddProduct.vue</li>
</ol>
<ul>
<li><p>主要內容來自 LoginForm.vue，只是需要多幾個 <div>。</p>
</li>
<li><p>修改 axios 的 URL，並在傳送時加上 token。</p>
</li>
<li><p>由於在 SpringBoot 設定中為了一次接收多筆產品資料，使用了 Product[]。 因此，即使只傳一筆資料，也需要在 data 中多加上 []。</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;template&gt;<br>	<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;flex justify-center min-h-screen items-center bg-gray-100&quot;</span>&gt;</span></span><br><span class="language-xml">		<span class="hljs-tag">&lt;<span class="hljs-name">form</span></span></span><br><span class="hljs-tag"><span class="language-xml">			<span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">			<span class="hljs-attr">role</span>=<span class="hljs-string">&quot;form&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">			<span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bg-white p-6 rounded-lg shadow-md w-full max-w-md&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">			@<span class="hljs-attr">submit.prevent</span>=<span class="hljs-string">&quot;handleSubmit&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">		&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mb-4&quot;</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-gray-700 font-bold mb-2&quot;</span>&gt;</span> Name <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Enter product name&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">className</span>=<span class="hljs-string">&quot;shadow border rounded w-full py-2 px-3 text-gray-700&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">name</span>=<span class="hljs-string">&quot;name&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;name&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				/&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">			<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mb-4&quot;</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-gray-700 font-bold mb-2&quot;</span>&gt;</span> Description <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Enter product description&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">className</span>=<span class="hljs-string">&quot;shadow border rounded w-full py-2 px-3 text-gray-700&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">name</span>=<span class="hljs-string">&quot;description&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;description&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				/&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">			<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mb-4&quot;</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-gray-700 font-bold mb-2&quot;</span>&gt;</span> Price <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Enter product price&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">className</span>=<span class="hljs-string">&quot;shadow border rounded w-full py-2 px-3 text-gray-700&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">name</span>=<span class="hljs-string">&quot;price&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;price&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				/&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">			<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mb-4&quot;</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-gray-700 font-bold mb-2&quot;</span>&gt;</span> Image URL <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Enter product image URL&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">className</span>=<span class="hljs-string">&quot;shadow border rounded w-full py-2 px-3 text-gray-700&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">name</span>=<span class="hljs-string">&quot;image&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;image&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				/&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">			<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;mb-4&quot;</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">className</span>=<span class="hljs-string">&quot;text-gray-700 font-bold mb-2&quot;</span>&gt;</span> Category <span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Enter product category&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">className</span>=<span class="hljs-string">&quot;shadow border rounded w-full py-2 px-3 text-gray-700&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">name</span>=<span class="hljs-string">&quot;category&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;category&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				/&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">			<span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">className</span>=<span class="hljs-string">&quot;bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">			&gt;</span></span><br><span class="language-xml">				Add</span><br><span class="language-xml">			<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">		<span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span></span><br><span class="language-xml">	<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123; ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123; useRouter &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue-router&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;axios&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123; useAuthStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/stores/auth&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-title function_">setup</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-keyword">const</span> router = <span class="hljs-title function_">useRouter</span>();</span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-keyword">const</span> authStore = <span class="hljs-title function_">useAuthStore</span>();</span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-keyword">const</span> name = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-keyword">const</span> description = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-keyword">const</span> price = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-keyword">const</span> image = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-keyword">const</span> category = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-keyword">const</span> <span class="hljs-title function_">handleSubmit</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span></span><br><span class="language-javascript"><span class="language-xml">			<span class="hljs-keyword">try</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">				<span class="hljs-keyword">const</span> token = authStore.<span class="hljs-property">token</span>;</span></span><br><span class="language-javascript"><span class="language-xml">				<span class="hljs-keyword">if</span>(!name.<span class="hljs-property">value</span> || !description.<span class="hljs-property">value</span> || !price.<span class="hljs-property">value</span> || !image.<span class="hljs-property">value</span> || !category.<span class="hljs-property">value</span> || <span class="hljs-built_in">isNaN</span>(price.<span class="hljs-property">value</span>))&#123;</span></span><br><span class="language-javascript"><span class="language-xml">					<span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;商品資料格式錯誤&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml">				&#125;</span></span><br><span class="language-javascript"><span class="language-xml">				<span class="hljs-keyword">const</span> data = [&#123;</span></span><br><span class="language-javascript"><span class="language-xml">					<span class="hljs-attr">name</span>: name.<span class="hljs-property">value</span>,</span></span><br><span class="language-javascript"><span class="language-xml">					<span class="hljs-attr">description</span>: description.<span class="hljs-property">value</span>,</span></span><br><span class="language-javascript"><span class="language-xml">					<span class="hljs-attr">price</span>: <span class="hljs-built_in">parseInt</span>(price.<span class="hljs-property">value</span>),</span></span><br><span class="language-javascript"><span class="language-xml">					<span class="hljs-attr">image</span>: image.<span class="hljs-property">value</span>,</span></span><br><span class="language-javascript"><span class="language-xml">					<span class="hljs-attr">category</span>: category.<span class="hljs-property">value</span>,</span></span><br><span class="language-javascript"><span class="language-xml">				&#125;];</span></span><br><span class="language-javascript"><span class="language-xml">				<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">post</span>(</span></span><br><span class="language-javascript"><span class="language-xml">					<span class="hljs-string">&quot;http://localhost:8080/api/product/&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">					data,</span></span><br><span class="language-javascript"><span class="language-xml">					&#123;</span></span><br><span class="language-javascript"><span class="language-xml">						<span class="hljs-attr">headers</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">							<span class="hljs-string">&#x27;Authorization&#x27;</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">$&#123;token&#125;</span>`</span></span></span><br><span class="language-javascript"><span class="language-xml">						&#125;</span></span><br><span class="language-javascript"><span class="language-xml">					&#125;</span></span><br><span class="language-javascript"><span class="language-xml">				);</span></span><br><span class="language-javascript"><span class="language-xml">				<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response.<span class="hljs-property">data</span>);</span></span><br><span class="language-javascript"><span class="language-xml">				router.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;/&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml">			&#125; <span class="hljs-keyword">catch</span> (error) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">				</span></span><br><span class="language-javascript"><span class="language-xml">				<span class="hljs-title function_">alert</span>(<span class="hljs-string">&quot;Error&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml">				<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error);</span></span><br><span class="language-javascript"><span class="language-xml">			&#125;</span></span><br><span class="language-javascript"><span class="language-xml">		&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-keyword">return</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">			name,</span></span><br><span class="language-javascript"><span class="language-xml">			description,</span></span><br><span class="language-javascript"><span class="language-xml">			price,</span></span><br><span class="language-javascript"><span class="language-xml">			image,</span></span><br><span class="language-javascript"><span class="language-xml">			category,</span></span><br><span class="language-javascript"><span class="language-xml">			handleSubmit,</span></span><br><span class="language-javascript"><span class="language-xml">		&#125;;</span></span><br><span class="language-javascript"><span class="language-xml">	&#125;,</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>在 router&#x2F;index.js 添加路由</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">routes</span>: [<br>  &#123;<br>    <span class="hljs-comment">//</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-comment">//</span><br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/add&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;add&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">AddProduct</span><br>  &#125;<br>]<br></code></pre></td></tr></table></figure>

<hr>
<p>測試功能</p>
<p>點擊 “Add Product”，嘗試新增商品資料。</p>
<p>測試未填內容或價格非數字時會彈出錯誤視窗。</p>
<p class='item-img' data-src='https://images2.imgbox.com/81/87/q951a5TX_o.png'><img src="https://images2.imgbox.com/81/87/q951a5TX_o.png"></p>
<h1 id="首頁呈現商品內容"><a href="#首頁呈現商品內容" class="headerlink" title="首頁呈現商品內容"></a>首頁呈現商品內容</h1><ol>
<li>新增 HomePage.vue</li>
</ol>
<ul>
<li>用於顯示商品列表。</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;template&gt;<br>	<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;isAuthenticated&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;p-4 bg-gray-50 min-h-screen&quot;</span>&gt;</span></span><br><span class="language-xml">		<span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="language-xml">			<span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;product in products&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">			<span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;product.id&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">			<span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-center border-b border-gray-200 py-4&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">		&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;<span class="hljs-name">img</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">:src</span>=<span class="hljs-string">&quot;product.image&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">:alt</span>=<span class="hljs-string">&quot;product.name&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">class</span>=<span class="hljs-string">&quot;w-16 h-16 object-cover rounded-lg shadow-sm mr-4&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">			/&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex-1&quot;</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">h2</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-lg font-bold text-gray-900&quot;</span>&gt;</span>&#123;&#123; product.name &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">h2</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-gray-700 text-sm&quot;</span>&gt;</span>&#123;&#123; product.description &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-green-600 font-semibold text-sm mt-1&quot;</span>&gt;</span></span><br><span class="language-xml">					Price: &#123;&#123; product.price &#125;&#125;</span><br><span class="language-xml">				<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-gray-500 text-xs mt-1&quot;</span>&gt;</span></span><br><span class="language-xml">					Category: &#123;&#123; product.category &#125;&#125;</span><br><span class="language-xml">				<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">	<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>	<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;p-4&quot;</span>&gt;</span></span><br><span class="language-xml">		<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-red-600 font-medium&quot;</span>&gt;</span>Please log in to see the products.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">	<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123; useAuthStore &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;@/stores/auth&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> &#123; computed, onMounted, ref &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;vue&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">import</span> axios <span class="hljs-keyword">from</span> <span class="hljs-string">&quot;axios&quot;</span>;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> authStore = <span class="hljs-title function_">useAuthStore</span>();</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> isAuthenticated = <span class="hljs-title function_">computed</span>(<span class="hljs-function">() =&gt;</span> authStore.<span class="hljs-property">isAuthenticated</span>);</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">//將商品資料提供給template</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> products = <span class="hljs-title function_">ref</span>([]);</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getProducts</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-keyword">try</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(</span></span><br><span class="language-javascript"><span class="language-xml">			<span class="hljs-string">&quot;http://localhost:8080/api/product/?minPrice=&amp;maxPrice=&amp;category=&amp;sort=&amp;pageNumber=0&amp;pageSize=20&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">			&#123;</span></span><br><span class="language-javascript"><span class="language-xml">				<span class="hljs-attr">headers</span>: &#123;</span></span><br><span class="language-javascript"><span class="language-xml">					<span class="hljs-title class_">Authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">$&#123;authStore.token&#125;</span>`</span>,</span></span><br><span class="language-javascript"><span class="language-xml">				&#125;,</span></span><br><span class="language-javascript"><span class="language-xml">			&#125;</span></span><br><span class="language-javascript"><span class="language-xml">		);</span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-comment">//把取得的商品資料放入products</span></span></span><br><span class="language-javascript"><span class="language-xml">		products.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">content</span>;</span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response.<span class="hljs-property">data</span>);</span></span><br><span class="language-javascript"><span class="language-xml">	&#125; <span class="hljs-keyword">catch</span> (error) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error);</span></span><br><span class="language-javascript"><span class="language-xml">	&#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">//等待template載入完成，再把商品資料放入template</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-keyword">if</span> (isAuthenticated.<span class="hljs-property">value</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">		<span class="hljs-title function_">getProducts</span>();</span></span><br><span class="language-javascript"><span class="language-xml">	&#125;</span></span><br><span class="language-javascript"><span class="language-xml">&#125;);</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>在 router&#x2F;index.js 添加路由</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-attr">routes</span>: [<br>  &#123;<br>    <span class="hljs-comment">//...</span><br>  &#125;,<br>  <span class="hljs-comment">//...</span><br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/&#x27;</span>,<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;home&#x27;</span>,<br>    <span class="hljs-attr">component</span>: <span class="hljs-title class_">HomePage</span><br>  &#125;<br>]<br></code></pre></td></tr></table></figure>

<hr>
<p>功能測試</p>
<p>登入後即可看到資料庫中的商品。</p>
<p class='item-img' data-src='https://images2.imgbox.com/01/ba/IxGirVrh_o.png'><img src="https://images2.imgbox.com/01/ba/IxGirVrh_o.png"></p>
<h1 id="換頁功能"><a href="#換頁功能" class="headerlink" title="換頁功能"></a>換頁功能</h1><ol>
<li>安裝 vue-awesome-paginate</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">bun i vue-awesome-paginate<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>修改 HomePage.vue</li>
</ol>
<ul>
<li><p>前往<a target="_blank" rel="noopener" href="https://www.npmjs.com/package/vue-awesome-paginate#usage">官方提供的範例</a> 。</p>
</li>
<li><p>根據範例修改 HomePage.vue。</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;template&gt;<br>	<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;isAuthenticated&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;p-4 bg-gray-50 min-h-screen&quot;</span>&gt;</span></span><br><span class="language-xml"></span><br><span class="language-xml">		<span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="language-xml">			<span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;product in products&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">			<span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;product.id&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">			<span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-center border-b border-gray-200 py-4&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">		&gt;</span></span><br><span class="language-xml">			//...</span><br><span class="language-xml">		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">		<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex justify-center&quot;</span>&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;<span class="hljs-name">vue-awesome-paginate</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">:total-items</span>=<span class="hljs-string">&quot;50&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">:items-per-page</span>=<span class="hljs-string">&quot;5&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">:max-pages-shown</span>=<span class="hljs-string">&quot;5&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;currentPage&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				@<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onClickHandler&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">			/&gt;</span></span><br><span class="language-xml">		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">	<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>	<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;p-4&quot;</span>&gt;</span></span><br><span class="language-xml">		//...</span><br><span class="language-xml">	<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">//...</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> <span class="hljs-title function_">onClickHandler</span> = (<span class="hljs-params">page</span>) =&gt; &#123;</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(page);</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> currentPage = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>);</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-comment">//...</span></span></span><br><span class="language-javascript"><span class="language-xml">&#125;);</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="language-css"><span class="language-xml"><span class="hljs-selector-class">.pagination-container</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">display</span>: flex;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">column-gap</span>: <span class="hljs-number">10px</span>;</span></span><br><span class="language-css"><span class="language-xml">&#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml"><span class="hljs-selector-class">.paginate-buttons</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">height</span>: <span class="hljs-number">40px</span>;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">width</span>: <span class="hljs-number">40px</span>;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">border-radius</span>: <span class="hljs-number">20px</span>;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">cursor</span>: pointer;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">background-color</span>: <span class="hljs-built_in">rgb</span>(<span class="hljs-number">242</span>, <span class="hljs-number">242</span>, <span class="hljs-number">242</span>);</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-built_in">rgb</span>(<span class="hljs-number">217</span>, <span class="hljs-number">217</span>, <span class="hljs-number">217</span>);</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">color</span>: black;</span></span><br><span class="language-css"><span class="language-xml">&#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml"><span class="hljs-selector-class">.paginate-buttons</span><span class="hljs-selector-pseudo">:hover</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#d8d8d8</span>;</span></span><br><span class="language-css"><span class="language-xml">&#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml"><span class="hljs-selector-class">.active-page</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#3498db</span>;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">border</span>: <span class="hljs-number">1px</span> solid <span class="hljs-number">#3498db</span>;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">color</span>: white;</span></span><br><span class="language-css"><span class="language-xml">&#125;</span></span><br><span class="language-css"><span class="language-xml"></span></span><br><span class="language-css"><span class="language-xml"><span class="hljs-selector-class">.active-page</span><span class="hljs-selector-pseudo">:hover</span> &#123;</span></span><br><span class="language-css"><span class="language-xml">	<span class="hljs-attribute">background-color</span>: <span class="hljs-number">#2988c8</span>;</span></span><br><span class="language-css"><span class="language-xml">&#125;</span></span><br><span class="language-css"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">style</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>修改main.js啟用 VueAwesomePaginate</li>
</ol>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">import</span> <span class="hljs-title class_">VueAwesomePaginate</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue-awesome-paginate&#x27;</span>;<br><span class="hljs-keyword">import</span> <span class="hljs-string">&quot;vue-awesome-paginate/dist/style.css&quot;</span>;<br><br><span class="hljs-comment">//...</span><br><br>app.<span class="hljs-title function_">use</span>(<span class="hljs-title class_">VueAwesomePaginate</span>)<br></code></pre></td></tr></table></figure>

<hr>
<p>測試換頁功能</p>
<p>找到選擇頁面的地方，按下 &lt;、&gt; 和數字。</p>
<p>觀察 Console 顯示的內容，是否和選擇的頁數相同。</p>
<p>例如，按下 2，Console 也顯示 2。</p>
<p class='item-img' data-src='https://images2.imgbox.com/bf/63/rTV6GolJ_o.png'><img src="https://images2.imgbox.com/bf/63/rTV6GolJ_o.png"></p>
<h2 id="更改每頁顯示的數量"><a href="#更改每頁顯示的數量" class="headerlink" title="更改每頁顯示的數量"></a>更改每頁顯示的數量</h2><ol>
<li>增加顯示商品數量的選項</li>
</ol>
<ul>
<li>增加一個選擇顯示商品數量的地方。</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;template&gt;<br><span class="hljs-comment">//...</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex justify-center&quot;</span>&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;<span class="hljs-name">vue-awesome-paginate</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">:total-items</span>=<span class="hljs-string">&quot;50&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">:items-per-page</span>=<span class="hljs-string">&quot;5&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">:max-pages-shown</span>=<span class="hljs-string">&quot;5&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;currentPage&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				@<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onClickHandler&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">			/&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ml-4 bg-gray-200&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;pageSize&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pageSize&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;pageSize&quot;</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;onChangeHandler&quot;</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;5&quot;</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;10&quot;</span>&gt;</span>10<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;15&quot;</span>&gt;</span>15<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;20&quot;</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml">		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">//...</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> pageSize = <span class="hljs-title function_">ref</span>(<span class="hljs-number">5</span>);</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> <span class="hljs-title function_">onChangeHandler</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(pageSize.<span class="hljs-property">value</span>);</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>測試：依次選擇 10、15、20、5，觀察內容變化時的 Console 輸出是否正確。</p>
<p>預設值是 5，選擇 5 時內容沒有變化，需要選擇 10、15、20 才符合變化條件。</p>
<p class='item-img' data-src='https://images2.imgbox.com/15/97/NYVwxgWE_o.png'><img src="https://images2.imgbox.com/15/97/NYVwxgWE_o.png"></p>
<ol start="2">
<li>讓頁面內容隨點擊變化</li>
</ol>
<p>使用 vue-awesome-paginate，接收來自後端的總商品數量，調整顯示最後一頁的頁碼。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;template&gt;<br><span class="hljs-comment">//...</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex justify-center&quot;</span>&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;<span class="hljs-name">vue-awesome-paginate</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">:total-items</span>=<span class="hljs-string">&quot;totalElement&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">:items-per-page</span>=<span class="hljs-string">&quot;parseInt(pageSize)&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">:max-pages-shown</span>=<span class="hljs-string">&quot;5&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;currentPage&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				@<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;onClickHandler&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">			/&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;ml-4 bg-gray-200&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;pageSize&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;pageSize&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;pageSize&quot;</span> @<span class="hljs-attr">change</span>=<span class="hljs-string">&quot;onChangeHandler&quot;</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;5&quot;</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;10&quot;</span>&gt;</span>10<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;15&quot;</span>&gt;</span>15<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;20&quot;</span>&gt;</span>20<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml">		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>		<span class="hljs-comment">//...</span><br>&lt;/template&gt;<br></code></pre></td></tr></table></figure>

<p>修改 axios 根據前端設定的頁碼和每頁數量來取得商品資料，頁數需要從 0 開始，網頁從 1 開始，所以要減 1。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;script setup&gt;<br><span class="hljs-comment">//...</span><br><span class="hljs-keyword">const</span> totalElement = <span class="hljs-title function_">ref</span>(<span class="hljs-number">1</span>);<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">getProducts</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">page, size</span>) =&gt; &#123;<br>	<span class="hljs-keyword">try</span> &#123;<br>		<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<br>			<span class="hljs-string">`http://localhost:8080/api/product/?minPrice=&amp;maxPrice=&amp;category=&amp;sort=&amp;pageNumber=<span class="hljs-subst">$&#123;page - <span class="hljs-number">1</span>&#125;</span>&amp;pageSize=<span class="hljs-subst">$&#123;<span class="hljs-built_in">parseInt</span>(size)&#125;</span>`</span>,<br>			&#123;<br>				<span class="hljs-attr">headers</span>: &#123;<br>					<span class="hljs-title class_">Authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">$&#123;authStore.token&#125;</span>`</span>,<br>				&#125;,<br>			&#125;<br>		);<br>		<span class="hljs-comment">//把取得的商品資料放入products</span><br>		products.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">content</span>;<br>		totalElement.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">totalElements</span>;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response.<span class="hljs-property">data</span>);<br>	&#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error);<br>	&#125;<br>&#125;;<br><br></code></pre></td></tr></table></figure>

<p>當切換頁碼和改變每頁顯示數量時，內容也要更新。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">onClickHandler</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>	<span class="hljs-title function_">getProducts</span>(currentPage.<span class="hljs-property">value</span>, pageSize.<span class="hljs-property">value</span>);<br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">onChangeHandler</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>	currentPage.<span class="hljs-property">value</span> = <span class="hljs-number">1</span>;<br>	<span class="hljs-title function_">getProducts</span>(currentPage.<span class="hljs-property">value</span>, pageSize.<span class="hljs-property">value</span>);<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>由於我們修改了 getProducts 的傳入參數，需要在 onMounted 的部分增加參數。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>	<span class="hljs-keyword">if</span> (isAuthenticated.<span class="hljs-property">value</span>) &#123;<br>		<span class="hljs-title function_">getProducts</span>(currentPage.<span class="hljs-property">value</span>, pageSize.<span class="hljs-property">value</span>);<br>	&#125;<br>&#125;);<br>&lt;/script&gt;<br></code></pre></td></tr></table></figure>


<p>前端確認修改結果</p>
<p>確認我們選擇 5 時，網頁上顯示的商品數量也是 5 個。</p>
<p class='item-img' data-src='https://images2.imgbox.com/25/fe/vEOcRr2j_o.png'><img src="https://images2.imgbox.com/25/fe/vEOcRr2j_o.png"></p>
<h2 id="根據條件篩選商品"><a href="#根據條件篩選商品" class="headerlink" title="根據條件篩選商品"></a>根據條件篩選商品</h2><p>我們將在左邊放置篩選用的列表，右邊放商品內容。</p>
<ol>
<li>設置篩選區域</li>
</ol>
<ul>
<li><p>在 v-if&#x3D;”isAuthenticated” 的 class 添加 flex。</p>
</li>
<li><p>增加一個 <div class="w-1/4 p-4">，用來放置過濾區塊，占用 1&#x2F;4 寬度。</p>
</li>
<li><p>在顯示商品的外面，多加一層 <div class="w-3/4 p-4">，讓它能使用 3&#x2F;4 寬度的版面。</p>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs jsx">&lt;template&gt;<br>	<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-if</span>=<span class="hljs-string">&quot;isAuthenticated&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;p-4 bg-gray-50 min-h-screen flex&quot;</span>&gt;</span></span><br><span class="language-xml">		<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;w-1/4 p-4&quot;</span>&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;p-4 bg-gray-100 rounded-lg shadow-md&quot;</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mb-4&quot;</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;block text-gray-700 font-bold mb-2&quot;</span>&gt;</span>Price<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-center&quot;</span>&gt;</span></span><br><span class="language-xml">						<span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">							<span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;min&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">							<span class="hljs-attr">type</span>=<span class="hljs-string">&quot;number&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">							<span class="hljs-attr">class</span>=<span class="hljs-string">&quot;border p-2 mb-2 w-full mr-2 rounded&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">							<span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;minPrice&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">						/&gt;</span></span><br><span class="language-xml">						<span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mx-2&quot;</span>&gt;</span>to<span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span></span><br><span class="language-xml">						<span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">							<span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;max&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">							<span class="hljs-attr">type</span>=<span class="hljs-string">&quot;number&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">							<span class="hljs-attr">class</span>=<span class="hljs-string">&quot;border p-2 mb-2 w-full ml-2 rounded&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">							<span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;maxPrice&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">						/&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mb-4&quot;</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;block text-gray-700 font-bold mb-2&quot;</span>&gt;</span>Sort by:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">select</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;border p-2 mb-4 w-full rounded&quot;</span> <span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;sortBy&quot;</span>&gt;</span></span><br><span class="language-xml">						<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span>Default<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">						<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;price_low&quot;</span>&gt;</span>Price : Low to High<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">						<span class="hljs-tag">&lt;<span class="hljs-name">option</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;price_high&quot;</span>&gt;</span>Price : High to Low<span class="hljs-tag">&lt;/<span class="hljs-name">option</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;/<span class="hljs-name">select</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mb-4&quot;</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;block text-gray-700 font-bold mb-2&quot;</span>&gt;</span>Category:<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;category in categories&quot;</span> <span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;category&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mb-2&quot;</span>&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">input</span></span></span><br><span class="hljs-tag"><span class="language-xml">						<span class="hljs-attr">type</span>=<span class="hljs-string">&quot;radio&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">						<span class="hljs-attr">:value</span>=<span class="hljs-string">&quot;category&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">						<span class="hljs-attr">v-model</span>=<span class="hljs-string">&quot;categoryType&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">						<span class="hljs-attr">class</span>=<span class="hljs-string">&quot;mr-2&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					/&gt;</span></span><br><span class="language-xml">					<span class="hljs-tag">&lt;<span class="hljs-name">label</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-gray-700&quot;</span>&gt;</span>&#123;&#123; category ? category : &quot;All&quot; &#125;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">label</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">				<span class="hljs-tag">&lt;<span class="hljs-name">button</span></span></span><br><span class="hljs-tag"><span class="language-xml">					<span class="hljs-attr">class</span>=<span class="hljs-string">&quot;bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded w-full&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">					@<span class="hljs-attr">click</span>=<span class="hljs-string">&quot;filterHandler&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				&gt;</span></span><br><span class="language-xml">					Filter</span><br><span class="language-xml">				<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">		<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;w-3/4 p-4&quot;</span>&gt;</span></span><br><span class="language-xml">			<span class="hljs-tag">&lt;<span class="hljs-name">div</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">v-for</span>=<span class="hljs-string">&quot;product in products&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">:key</span>=<span class="hljs-string">&quot;product.id&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">				<span class="hljs-attr">class</span>=<span class="hljs-string">&quot;flex items-center border-b border-gray-200 py-4&quot;</span></span></span><br><span class="hljs-tag"><span class="language-xml">			&gt;</span></span><br><span class="language-xml">				//...</span><br><span class="language-xml">			<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">			//...</span><br><span class="language-xml">		<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br><span class="language-xml">	<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>	<span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">v-else</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;p-4&quot;</span>&gt;</span></span><br><span class="language-xml">		<span class="hljs-tag">&lt;<span class="hljs-name">p</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;text-red-600 font-medium&quot;</span>&gt;</span>Please log in to see the products.<span class="hljs-tag">&lt;/<span class="hljs-name">p</span>&gt;</span></span><br><span class="language-xml">	<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>&lt;/template&gt;<br><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">setup</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">//...</span></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> categories = [</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-string">&quot;&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-string">&quot;Bags&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-string">&quot;Shoe&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-string">&quot;Headset&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-string">&quot;Mice&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-string">&quot;Keyboard&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-string">&quot;Chair&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-string">&quot;Dinnerware&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-string">&quot;Light&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-string">&quot;Jean&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">];</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> categoryType = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> minPrice = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> maxPrice = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> sortBy = <span class="hljs-title function_">ref</span>(<span class="hljs-string">&quot;&quot;</span>);</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">//...</span></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-keyword">const</span> <span class="hljs-title function_">filterHandler</span> = (<span class="hljs-params"></span>) =&gt; &#123;</span></span><br><span class="language-javascript"><span class="language-xml">	<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(minPrice.<span class="hljs-property">value</span>, maxPrice.<span class="hljs-property">value</span>, categoryType.<span class="hljs-property">value</span>, sortBy.<span class="hljs-property">value</span>);</span></span><br><span class="language-javascript"><span class="language-xml">&#125;;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml"><span class="hljs-comment">//...</span></span></span><br><span class="language-javascript"><span class="language-xml"></span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<p>測試功能</p>
<p>填寫最低價、最高價、排序方式、商品類別後，按下 Filter 按鈕，就能看到預計傳給後端的參數。</p>
<p>可以看到和我們選擇的內容一樣，有相同的數值。</p>
<p class='item-img' data-src='https://images2.imgbox.com/a7/e5/yrBFFxBz_o.png'><img src="https://images2.imgbox.com/a7/e5/yrBFFxBz_o.png"></p>
<ol start="2">
<li>實現過濾商品功能</li>
</ol>
<p>確認參數沒問題後，完成過濾商品功能。</p>
<p>修改 getProducts 的輸入參數，並在使用到 getProducts 的地方增加傳入的參數。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs jsx"><span class="hljs-keyword">const</span> <span class="hljs-title function_">getProducts</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params">min, max, category, sort, page, size</span>) =&gt; &#123;<br>	<span class="hljs-keyword">try</span> &#123;<br>		<span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> axios.<span class="hljs-title function_">get</span>(<br>			<span class="hljs-string">`http://localhost:8080/api/product/?minPrice=<span class="hljs-subst">$&#123;</span></span><br><span class="hljs-subst"><span class="hljs-string">				min</span></span><br><span class="hljs-subst"><span class="hljs-string">			&#125;</span>&amp;maxPrice=<span class="hljs-subst">$&#123;</span></span><br><span class="hljs-subst"><span class="hljs-string">				max</span></span><br><span class="hljs-subst"><span class="hljs-string">			&#125;</span>&amp;category=<span class="hljs-subst">$&#123;category&#125;</span>&amp;sort=<span class="hljs-subst">$&#123;sort&#125;</span>&amp;pageNumber=<span class="hljs-subst">$&#123;</span></span><br><span class="hljs-subst"><span class="hljs-string">				page - <span class="hljs-number">1</span></span></span><br><span class="hljs-subst"><span class="hljs-string">			&#125;</span>&amp;pageSize=<span class="hljs-subst">$&#123;<span class="hljs-built_in">parseInt</span>(size)&#125;</span>`</span>,<br>			&#123;<br>				<span class="hljs-attr">headers</span>: &#123;<br>					<span class="hljs-title class_">Authorization</span>: <span class="hljs-string">`Bearer <span class="hljs-subst">$&#123;authStore.token&#125;</span>`</span>,<br>				&#125;,<br>			&#125;<br>		);<br>		products.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">content</span>;<br>		totalElement.<span class="hljs-property">value</span> = response.<span class="hljs-property">data</span>.<span class="hljs-property">totalElements</span>;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(response.<span class="hljs-property">data</span>);<br>	&#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>		<span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(error);<br>	&#125;<br>&#125;;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">onClickHandler</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>	<span class="hljs-title function_">getProducts</span>(minPrice.<span class="hljs-property">value</span>, maxPrice.<span class="hljs-property">value</span>, categoryType.<span class="hljs-property">value</span>, sortBy.<span class="hljs-property">value</span>, currentPage.<span class="hljs-property">value</span>, pageSize.<span class="hljs-property">value</span>);<br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">onChangeHandler</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>	currentPage.<span class="hljs-property">value</span> = <span class="hljs-number">1</span>;<br>	<span class="hljs-title function_">getProducts</span>(minPrice.<span class="hljs-property">value</span>, maxPrice.<span class="hljs-property">value</span>, categoryType.<span class="hljs-property">value</span>, sortBy.<span class="hljs-property">value</span>, currentPage.<span class="hljs-property">value</span>, pageSize.<span class="hljs-property">value</span>);<br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">filterHandler</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>	currentPage.<span class="hljs-property">value</span> = <span class="hljs-number">1</span>;<br>	<span class="hljs-title function_">getProducts</span>(minPrice.<span class="hljs-property">value</span>, maxPrice.<span class="hljs-property">value</span>, categoryType.<span class="hljs-property">value</span>, sortBy.<span class="hljs-property">value</span>, currentPage.<span class="hljs-property">value</span>, pageSize.<span class="hljs-property">value</span>);<br>&#125;;<br><br><span class="hljs-title function_">onMounted</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>	<span class="hljs-keyword">if</span> (isAuthenticated.<span class="hljs-property">value</span>) &#123;<br>		<span class="hljs-title function_">getProducts</span>(minPrice.<span class="hljs-property">value</span>, maxPrice.<span class="hljs-property">value</span>, categoryType.<span class="hljs-property">value</span>, sortBy.<span class="hljs-property">value</span>, currentPage.<span class="hljs-property">value</span>, pageSize.<span class="hljs-property">value</span>);<br>	&#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p>我們可以修改最低價、最高價、排序設定、商品類別，來測試篩選結果。</p>
<ul>
<li>設定 200-999，Price：Low To High，Category：All 顯示價格從 200 到 999 的商品，價格由低到高排序。</li>
</ul>
<p class='item-img' data-src='https://images2.imgbox.com/e7/22/gl99L3p1_o.png'><img src="https://images2.imgbox.com/e7/22/gl99L3p1_o.png"></p>
<ul>
<li>設定 699-699，Price：High To Low，Category：Keyboard 只會顯示價格為 699 的 Keyboard 商品。</li>
</ul>
<p class='item-img' data-src='https://images2.imgbox.com/92/41/Ty0F3Pg7_o.png'><img src="https://images2.imgbox.com/92/41/Ty0F3Pg7_o.png"></p>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/2024/11/08/spring-boot-pop-30/">← Next Spring Boot project-oriented programming（30）Vue.js 打造 RESTful API前端：購物車和導入SSL</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2024/11/06/spring-boot-pop-28/">Spring Boot project-oriented programming（28）Vue.js 打造 RESTful API前端：註冊、登入與登出 Prev →</a></div></div></div></div><div class="bottom-btn"><div><a class="i-top" id="to-top" onClick="scrolls.scrolltop();" title="To Top" style="opacity: 0; display: none;">∧ </a><a class="i-index" id="to-index" href="#toc-div" title="To Catalog">≡</a><a class="i-color" id="color-mode" onClick="colorMode.change()" title="Change Theme"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="/img/faction/6.png" alt="Logo"></a><h1 id="Dr"><a href="/">96gen</a></h1><div id="description"><p></p></div></div><div id="aside-block"><div id="toc-div"><h1>Catalog</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8C%81%E4%B9%85%E5%8C%96%E4%BF%9D%E5%AD%98"><span class="toc-number">1.</span> <span class="toc-text">持久化保存</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A5%E9%A9%9F"><span class="toc-number">1.1.</span> <span class="toc-text">步驟</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%95%86%E5%93%81%E9%A0%81%E9%9D%A2"><span class="toc-number">2.</span> <span class="toc-text">新增商品頁面</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%A6%96%E9%A0%81%E5%91%88%E7%8F%BE%E5%95%86%E5%93%81%E5%85%A7%E5%AE%B9"><span class="toc-number">3.</span> <span class="toc-text">首頁呈現商品內容</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%8F%9B%E9%A0%81%E5%8A%9F%E8%83%BD"><span class="toc-number">4.</span> <span class="toc-text">換頁功能</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%94%B9%E6%AF%8F%E9%A0%81%E9%A1%AF%E7%A4%BA%E7%9A%84%E6%95%B8%E9%87%8F"><span class="toc-number">4.1.</span> <span class="toc-text">更改每頁顯示的數量</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A0%B9%E6%93%9A%E6%A2%9D%E4%BB%B6%E7%AF%A9%E9%81%B8%E5%95%86%E5%93%81"><span class="toc-number">4.2.</span> <span class="toc-text">根據條件篩選商品</span></a></li></ol></li></ol></div></div><footer><nobr><span class="icp-title">copyright</span><a class="icp-content" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">CC BY-NC-SA 4.0</a></nobr><br><nobr>Published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr> by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas></body></html>